<!DOCTYPE html><html><head><link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
        <link rel="shortcut icon" href="/favicon/favicon.ico" />
        <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
        <link rel="manifest" href="/favicon/site.webmanifest" /><meta name="viewport" content="width=device-width, initial-scale=1"><meta charset="UTF-8"><title>Internet Radio Protocol</title></head><body style="font-family:Archivo Light; padding:10vw; padding-top:10px;">
        
        <div class="the-header" style="display:flex; align-items:center;">
        <img id="main-logo" src="assets/ears.gif">
        <p id="title">Internet Radio<br>Protocol</p></div>
        <div id="intro-div">The Internet Radio Protocol is a standardized hub of real-time now playing data and direct streaming links for a ever-expanding, curated list of stations. Click a logo to tune in. Support a station if you like it. And follow me on instagram, <a class='insta-link' target='_blank' href='https://www.instagram.com/scud.works/'>@scud.works</a>.</div><br><br>Last updated <span class='last-updated'>Fri, Nov 28 at 10:00 PM</span>. <span class='live-count'>40 total, 46 online, 35 live, 5 offline</span>.
        <div id="play-random">
            <div id="play-random-button">
            ▶RANDOM
            </div>
            <div id="play-random-text">
            </div>
        </div>
        <div class="streams-container" id="favorites-container"></div><div class="streams-container" id="streams-container">
        </div>You can access this information and more in JSON format at <a href="https://internetradioprotocol.org/info">internetradioprotocol.org/info</a>. If you have any questions, comments, or radio station addition suggestions, please email <a href="mailto:brayden@braydenmoore.com">brayden@braydenmoore.com</a> or open an issue on Github <a target="_blank" href="https://github.com/brayden1moore/internet-radio-protocol">github.com/brayden1moore/internet-radio-protocol</a>. Also, check out the tuner I am making:<br><br><br><a href="https://www.instagram.com/scud.works/" target="_blank" style="border:none !important; height:250px;"><img height=250px style="border: 1px solid black;" src="assets/sr.JPG"></a></body></html><style>

        .insta-link {
            color: white !important;
            border-bottom: 1px white solid !important;
        }
        .insta-link:hover {
            color: black !important;
            background-color: white !important;
        }

        #intro-div {
            margin-bottom: -5px;
            border: 1px solid black;
            padding: 10px;
            background-color: black;
            color: white;
            
        }

        #play-random {
            margin-top: 25px;
            display: flex;
            align-items: center;
        }

        #play-random-button {
            cursor:pointer;
            height: auto;
            width: auto;
            background-color: yellow;
            border: 1px solid black;
            padding: 5px;
            margin-right: 8px;
        }

        #play-random-text {
            cursor: pointer;
        }

        #title {
            margin-left: -15px;
        }
        

        .one-liner {
        will-change: transform;
        backface-visibility: hidden;
        }

        .one-liner > div {
        will-change: transform;
        backface-visibility: hidden;
        }

        .one-liner > div:hover {
        animation-play-state: paused;
        }

        .one-liner span {
        transform: none !important;
        animation: none !important;
        will-change: transform;
        backface-visibility: hidden;
        }

        .flash {
        background-color: white !important;
        color: black !important;
        }

        .flash-out {
        transition: background-color 1s ease-out, color 1s ease-out;
        }

        .stream-name {background-color:#000000 !important; color:#FFFFFF !important}
        .links {display:flex; margin-top: 10px; margin-bottom: 8px;}
        .a-link {font-size: 8pt !important; margin-right: 10px;}
        .support-link {background-color:#FFFF00; border: 1px solid #000000;}
        .info-link {display:none}

        #favorites-container {
            padding-bottom: 30px;
            border-bottom: solid black 1px;
        }

        .favorite-star-favorited {
            font-size: 14pt;
            opacity: 0;
            color: yellow;
        }
        
        .favorite-star {
            font-size: 14pt;
            opacity: 0.1;
        }
        .favorite-star:hover {
            opacity: 1;
        }


        #main-logo {height: 130px; margin-left: -30px;}
        .a-station-container {position:relative; cursor:default; background-color: #FFFFFF; color:#000000; height: 90px; padding: 10px; overflow-x:hidden; overflow-y:hidden; border:1px solid black; align-items: center; display: flex; white-space: nowrap;}
        .offline {
            opacity: 0.5;
        }
        
        .a-logo {width:90px; height:90px; margin-right:10px; border: 1px solid black; cursor: pointer; flex-shrink: 0;}
        body {background-color: #FFFFFF; font-size: 10pt;}
        .the-header {font-family: "Archivo ExtraBold"; font-size: 24pt; line-height:0.75em; letter-spacing:-0.05em; margin-top:25px;}
        .a-station {font-family: "Archivo Light"; font-size:8pt; white-space: nowrap; flex-shrink: 0;}
        
        @font-face {font-family: "Archivo ExtraBold";src: url("assets/Archivo-ExtraBold.ttf") format("truetype");}
        
        a {font-size: 10pt; color:#000000; border-bottom: 1px solid black; text-decoration: none;}
        a:hover {background-color: #000000; color:#FFFFFF}
       
        @font-face {font-family: "Archivo Light";src: url("assets/Archivo-Light.ttf") format("truetype");}
       
         @keyframes pulse{0%{background:#ffffff}50%{background:#ddd}100%{background:#ffffff}}.pulsing{animation:pulse 1s infinite}
        .streams-container {display: grid; grid-template-columns: 1fr; gap: 20px; margin-top:30px; margin-bottom:30px;}
        @media (orientation: landscape) 
        {
        .info-link {display:block}
        body{font-size: 12pt;} 
        .a-link {font-size: 10pt !important;}
        .a-station-container {height:110px;} 
        .streams-container {grid-template-columns: 1fr 1fr 1fr;} 
        .the-header{
            font-size: 38pt;
        } .a-station {font-size:10pt;} 
        .a-logo {width:110px; height:110px;} a {font-size: 12pt}
        #main-logo {height: 200px; margin-left: -40px;}
        #title {margin-left: -20px;}
        }
        </style><script>

        function toggleAudio(id, random=false){
            let a=document.getElementById(`${id}-audio`),d=document.getElementById(id),isPlaying=d.style.backgroundColor==='yellow';
            document.querySelectorAll('audio').forEach(e=>{e.pause();
            e.removeAttribute('src');e.load();e.parentElement.parentElement.style.backgroundColor='white';
            e.parentElement.parentElement.classList.remove('pulsing')});

            const randomButton = document.getElementById('play-random-button');

            if(!isPlaying){
                a.src=a.dataset.src;
                a.load();
                d.classList.add('pulsing');
                if (random) {
                    randomButton.classList.add('pulsing');
                }
                a.play().then(()=>{
                    d.classList.remove('pulsing');
                    if (random) {
                        randomButton.classList.remove('pulsing');
                    }
                    d.style.backgroundColor='yellow'}).catch(e=>{
                        console.error(e);d.classList.remove('pulsing')})}}</script><script>document.querySelectorAll('.last-updated').forEach(el => {const utcStr = el.dataset.utc;if (utcStr) {const date = new Date(utcStr);if (!isNaN(date)) {el.textContent = date.toLocaleString();}}});</script>
        <script>

        function playRandom() {
            let alreadyPlaying = true;
            const stationContainers = document.querySelectorAll('.a-station-container');
            const idList = Array.from(stationContainers).map(container => container.id);
            let oneLiner = '';
            let id = '';
            while (alreadyPlaying) {
                let choice = Math.floor(Math.random() * idList.length);
                id = idList[choice];
                alreadyPlaying = !document.getElementById(`${id}-audio`).paused;
                if (!alreadyPlaying) {
                        const container = document.getElementById(id);
                        oneLiner = container.querySelector('.one-liner').textContent;
                        status = container.querySelector('.status').textContent;
                        if (status == "Offline") {
                            alreadyPlaying = true;
                        }
                }
            }
            toggleAudio(id, true);
            const playRandomText = document.getElementById('play-random-text');
            playRandomText.innerHTML = `<span style="border-bottom: 1px solid black;" id="previewFor-${id}">${id}: ${oneLiner}</span>`;
        }

        const playRandomButton = document.getElementById('play-random-button');
        playRandomButton.addEventListener('click', playRandom);

        const playRandomTextElement = document.getElementById('play-random-text');
        playRandomTextElement.addEventListener('click', function() {
            const previewSpan = playRandomTextElement.querySelector('span');
            const id = previewSpan.id.replace('previewFor-', '');
            element = document.getElementById(id)
            const yOffset = -1 * (window.innerHeight / 2) + 100;
            const y = element.getBoundingClientRect().top + window.scrollY + yOffset;
            window.scrollTo({top: y, behavior: 'smooth'});
        });

        function calculateMarquees() {
            const stationContainers = document.querySelectorAll('.a-station-container');
            let needsMarquee = false;
            stationContainers.forEach((container) => {
                const logo = container.querySelector('.a-logo');
                const nowPlaying = container.querySelector('.now-playing');
                const oneLiner = container.querySelector('.one-liner');
                const width = (container.offsetWidth - logo.offsetWidth - (nowPlaying.offsetWidth - oneLiner.offsetWidth)) + 'px';
                needsMarquee = (container.offsetWidth - logo.offsetWidth - nowPlaying.offsetWidth) < 30;
                if (needsMarquee) {
                    setupOneLinerMarquee(oneLiner, width, 'left');
                };
            });
        }

        function setupOneLinerMarquee(oneLinerElement, width, direction = 'left') {
            const text = oneLinerElement.textContent;
            const textLength = text.length;
            
            const wrapper = document.createElement('div');
            wrapper.style.cssText = `
                overflow: hidden;
                white-space: nowrap;
                display: inline-block;
                width: ${width};
                position: relative;
                top: 3px;
                will-change: transform;
                backface-visibility: hidden;
            `;
            
            const scrollContainer = document.createElement('div');
            scrollContainer.style.cssText = `
                display: inline-block;
                white-space: nowrap;
                will-change: transform;
                backface-visibility: hidden;
            `;
            
            const originalSpan = document.createElement('span');
            originalSpan.classList.add('marqueeOneLiner');
            originalSpan.textContent = text;
            originalSpan.style.cssText = `
                display: inline-block;
                margin-right: 40px;
                will-change: transform;
                backface-visibility: hidden;
            `;
            
            const clonedSpan = originalSpan.cloneNode(true);
            
            scrollContainer.appendChild(originalSpan);
            scrollContainer.appendChild(clonedSpan);
            oneLinerElement.innerHTML = '';
            oneLinerElement.appendChild(wrapper);
            wrapper.appendChild(scrollContainer);
            
            scrollContainer.offsetHeight;
            
            const computedStyle = window.getComputedStyle(originalSpan);
            const marginRight = parseFloat(computedStyle.marginRight) || "10px";
            const totalWidth = originalSpan.offsetWidth + marginRight;
            const duration = totalWidth / 25; 
            
            const uid = Math.random().toString(36).substr(2, 5);
            const animName = `scroll-oneliner-${direction}-${uid}`;
            
            const styleElement = document.createElement('style');
            
            if (direction === 'left') {
                scrollContainer.style.transform = 'translateX(0px)';
                styleElement.textContent = `
                @keyframes ${animName} {
                    0% { transform: translateX(0px); }
                    20% { transform: translateX(0px); }
                    100% { transform: translateX(-50%); }
                }
                `;
            } else {
                scrollContainer.style.transform = 'translateX(-50%)';
                styleElement.textContent = `
                @keyframes ${animName} {
                    0% { transform: translateX(-50%); }
                    100% { transform: translateX(0px); }
                }
                `;
            }
            
            document.head.appendChild(styleElement);
            
            scrollContainer.style.cssText += `
                animation-name: ${animName};
                animation-duration: ${duration}s;
                animation-timing-function: linear;
                animation-iteration-count: infinite;
                animation-fill-mode: forwards;
                will-change: transform;
                backface-visibility: hidden;
                transform: translateZ(0);
            `;
        }


        function decodeHtmlEntities(text) {
            const textarea = document.createElement('textarea');
            textarea.innerHTML = text;
            return textarea.value;
        }

        function populateStations(data) {
            var rerun = 0;
            var live = 0;
            var offline = 0;

            const container = document.getElementById('streams-container');

            Object.keys(data).forEach(function(stationName) {
                const station = data[stationName];
                const oneLiner = decodeHtmlEntities(data[stationName]['oneLiner']);
                const location = data[stationName]['location'];
                const status = data[stationName]['status'];
                const streamLink = data[stationName]['streamLink'];
                const mainLink = data[stationName]['mainLink'];
                const infoLink = data[stationName]['infoLink'];
                const donateLink = data[stationName]['donateLink'];
                const logo = data[stationName]['logo'];
                const hidden = data[stationName]['hidden'];

                const rerunStrs = ['(r)', 're-run', 're-wav', 'restream', 'playlist'];

                const stationDiv = document.createElement('div')
                stationDiv.classList.add('a-station-container');
                stationDiv.id = stationName
                stationDiv.innerHTML = `
                <p class="favorite-star-favorited" id="${stationName}-favorite" style="position: absolute; top: 10px; right: 10px; margin: 0; cursor: pointer; z-index: 10;">★</p>
                <p class="favorite-star" onClick="toggleFavorite('${stationName}')"  id="${stationName}-favorite-outline" style="position: absolute; top: 10px; right: 10px; margin: 0; cursor: pointer; z-index: 11;">☆</p>
                <img class="a-logo"  onclick="toggleAudio('${stationName}')" src="${logo}"  />
                <div class="a-station">
                <a class="stream-name" target="_blank" href="${mainLink}">${stationName}</a>
                <div class="links">
                    <a class="a-link" target="_blank" href="${streamLink}">STREAM</a>
                    <a class="a-link" target="_blank" href="${mainLink}">WEBSITE</a>
                    <a class="a-link info-link" target="_blank" href="${infoLink}">INFO</a>
                    <a class="a-link support-link" target="_blank" href="${donateLink}">DONATE</a>
                </div>
                <span class="now-playing">Playing: <span class="one-liner">${oneLiner}</span></span><br>
                Location: <span class="location">${location}</span><br>Status: <span class="status">${status}</span><br>
                <audio id="${stationName}-audio" style="width:40px;" data-src="${streamLink}"></audio>
                </div>`
                if (status === 'Offline') {
                    offline++;
                    stationDiv.classList.add('offline');
                }
                else if (rerunStrs.some(str => oneLiner.toLowerCase().includes(str.toLowerCase()))) {
                    rerun++;
                }
                else {
                    live++;
                }
                //calculateMarquees();
                if (hidden != true) {
                    container.appendChild(stationDiv);
                }
            });
            
            const liveCount = document.querySelector('.live-count');
            liveCount.textContent = `${live + offline + rerun} total, ${live + rerun} online, ${live} live, ${offline} offline`;
            
            const lastUpdated = document.querySelector('.last-updated');
            const now = new Date();
            const formatter = new Intl.DateTimeFormat('en-US', {
                weekday: 'short',
                month: 'short',
                day: 'numeric',
                hour: 'numeric',
                minute: '2-digit',
                hour12: true
            });
            
            lastUpdated.textContent = formatter.format(now);
            lastUpdated.classList.add('flash');
            setTimeout(function() {
                lastUpdated.classList.add('flash-out');
                lastUpdated.classList.remove('flash');
            }, 100);
            setTimeout(function() {
                lastUpdated.classList.remove('flash-out');
            }, 1100);
        }

        function getUpdatedInfo() {
            fetch('https://internetradioprotocol.org/info', {
                method: 'GET'
            })
            .then(function(response) { return response.json(); })
            .then(function(json) {
                populateStations(json);
            })
            .catch(function(error) {
                console.error('Fetch error:', error);
            });
        }

        function distributeFavorites(favorites) {
            const favoriteDiv = document.getElementById('favorites-container');
            const originalContainer = document.getElementById('streams-container');
            
            if (favorites.length == 0) {
                favoriteDiv.style.display = "none";
            } else {
                favoriteDiv.style.display = "grid";
            }
            
            const allFavoriteStations = favoriteDiv.querySelectorAll('.a-station-container');
            allFavoriteStations.forEach((station) => {
                //originalContainer.appendChild(station);
                originalContainer.insertBefore(station, originalContainer.firstChild);

                let favoriteStar = station.querySelector('.favorite-star-favorited');
                let favoriteOutline = station.querySelector('.favorite-star');
                
                if (favoriteStar) favoriteStar.style.opacity = '0';
                if (favoriteOutline) favoriteOutline.style.opacity = '0.1';
            });
            
            const allStations = document.querySelectorAll('.a-station-container');
            allStations.forEach((station) => {
                station.style.display = 'flex';
            });
            
            favorites.forEach((stationId) => {
                let stationDiv = document.getElementById(stationId);
                if (stationDiv) {
                    
                    let favoriteStar = stationDiv.querySelector('.favorite-star-favorited');
                    let favoriteOutline = stationDiv.querySelector('.favorite-star');
                    
                    if (favoriteStar) favoriteStar.style.opacity = '1';
                    if (favoriteOutline) favoriteOutline.style.opacity = '1';

                    console.log(favoriteStar);

                    favoriteDiv.appendChild(stationDiv);
                }
            });
            
            getUpdatedInfo();
        }

        function toggleFavorite(id) {
            let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
            const index = favorites.indexOf(id);
            if (index > -1) {
                favorites.splice(index, 1);
            } else {
                favorites.push(id);
            }
            localStorage.setItem('favorites', JSON.stringify(favorites));
            console.log(favorites);
            distributeFavorites(favorites);
        }

        document.addEventListener('DOMContentLoaded', () => {
            //calculateMarquees();
            getUpdatedInfo();
            let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
            distributeFavorites(favorites);
        });
        setInterval(getUpdatedInfo, 30000);

        </script>
        